<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hujewelz.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="ä¸€ç›´æƒ³å†™ä¸€äº› Swift çš„ä¸œè¥¿ï¼Œå´ä¸çŸ¥é“ä»ä½•å†™èµ·ã€‚å› ä¸ºæƒ³å†™çš„ä¸œè¥¿å¤ªå¤šï¼Œç„¶åæ‰€æœ‰çš„ä¸œè¥¿éƒ½æ··æ‚åœ¨ä¸€èµ·ï¼Œå¯¼è‡´ä»€ä¹ˆéƒ½å†™ä¸å‡ºæ¥ã€‚ç¿»äº†ç¿»ä»¥å‰åœ¨ç»„å†…åˆ†äº«çš„ä¸€äº›ä¸œè¥¿ï¼Œæƒ³æƒ³æŠŠè¿™äº›å†…å®¹æ•´ç†ä¸‹ï¼Œå†™è¿›åšå®¢å§ã€‚æˆ‘å¯¹è®¡åˆ’è¦å†™çš„ä¸œè¥¿åšäº†ä¸ªæ¸…å•ï¼ˆæœ€è¿‘åšä»€ä¹ˆéƒ½å–œæ¬¢åœ¨å‰ä¸€å¤©ç¡è§‰å‰åšä¸ªæ¸…å•ï¼Œè¿™æ ·å¤šå°‘æ”¹å–„äº†æˆ‘çš„æ‹–å»¶ç—‡ğŸ¤ªï¼‰ï¼š">
<meta property="og:type" content="article">
<meta property="og:title" content="Swiftä¸é¢å‘åè®®ç¼–ç¨‹çš„é‚£äº›äº‹">
<meta property="og:url" content="https://hujewelz.github.io/ck9grdnzq0007eyye9rdmah7z/index.html">
<meta property="og:site_name" content="Jewelz&#96;s Home Page">
<meta property="og:description" content="ä¸€ç›´æƒ³å†™ä¸€äº› Swift çš„ä¸œè¥¿ï¼Œå´ä¸çŸ¥é“ä»ä½•å†™èµ·ã€‚å› ä¸ºæƒ³å†™çš„ä¸œè¥¿å¤ªå¤šï¼Œç„¶åæ‰€æœ‰çš„ä¸œè¥¿éƒ½æ··æ‚åœ¨ä¸€èµ·ï¼Œå¯¼è‡´ä»€ä¹ˆéƒ½å†™ä¸å‡ºæ¥ã€‚ç¿»äº†ç¿»ä»¥å‰åœ¨ç»„å†…åˆ†äº«çš„ä¸€äº›ä¸œè¥¿ï¼Œæƒ³æƒ³æŠŠè¿™äº›å†…å®¹æ•´ç†ä¸‹ï¼Œå†™è¿›åšå®¢å§ã€‚æˆ‘å¯¹è®¡åˆ’è¦å†™çš„ä¸œè¥¿åšäº†ä¸ªæ¸…å•ï¼ˆæœ€è¿‘åšä»€ä¹ˆéƒ½å–œæ¬¢åœ¨å‰ä¸€å¤©ç¡è§‰å‰åšä¸ªæ¸…å•ï¼Œè¿™æ ·å¤šå°‘æ”¹å–„äº†æˆ‘çš„æ‹–å»¶ç—‡ğŸ¤ªï¼‰ï¼š">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/render.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/render2.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/binarysearch1.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/binarysearch2.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/loading.gif">
<meta property="og:image" content="https://www.raizlabs.com/dev/wp-content/uploads/sites/10/2016/12/Defaults-1-768x503.png">
<meta property="article:published_time" content="2018-01-08T03:53:41.000Z">
<meta property="article:modified_time" content="2020-04-25T08:08:23.000Z">
<meta property="article:author" content="Jewelz Hu">
<meta property="article:tag" content="Swift">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/render.png">

<link rel="canonical" href="https://hujewelz.github.io/ck9grdnzq0007eyye9rdmah7z/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Swiftä¸é¢å‘åè®®ç¼–ç¨‹çš„é‚£äº›äº‹ | Jewelz`s Home Page</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Jewelz`s Home Page</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">iOSå·¥ç¨‹å¸ˆä¸€æšï¼Œçƒ­çˆ±å‰ç«¯æŠ€æœ¯</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hujewelz.github.io/ck9grdnzq0007eyye9rdmah7z/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Jewelz Hu">
      <meta itemprop="description" content="Stay hungry, Stay foolish.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jewelz`s Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Swiftä¸é¢å‘åè®®ç¼–ç¨‹çš„é‚£äº›äº‹
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-08 11:53:41" itemprop="dateCreated datePublished" datetime="2018-01-08T11:53:41+08:00">2018-01-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-25 16:08:23" itemprop="dateModified" datetime="2020-04-25T16:08:23+08:00">2020-04-25</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index"><span itemprop="name">Swift</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>ä¸€ç›´æƒ³å†™ä¸€äº› Swift çš„ä¸œè¥¿ï¼Œå´ä¸çŸ¥é“ä»ä½•å†™èµ·ã€‚å› ä¸ºæƒ³å†™çš„ä¸œè¥¿å¤ªå¤šï¼Œç„¶åæ‰€æœ‰çš„ä¸œè¥¿éƒ½æ··æ‚åœ¨ä¸€èµ·ï¼Œå¯¼è‡´ä»€ä¹ˆéƒ½å†™ä¸å‡ºæ¥ã€‚ç¿»äº†ç¿»ä»¥å‰åœ¨ç»„å†…åˆ†äº«çš„ä¸€äº›ä¸œè¥¿ï¼Œæƒ³æƒ³æŠŠè¿™äº›å†…å®¹æ•´ç†ä¸‹ï¼Œå†™è¿›åšå®¢å§ã€‚æˆ‘å¯¹è®¡åˆ’è¦å†™çš„ä¸œè¥¿åšäº†ä¸ªæ¸…å•ï¼ˆæœ€è¿‘åšä»€ä¹ˆéƒ½å–œæ¬¢åœ¨å‰ä¸€å¤©ç¡è§‰å‰åšä¸ªæ¸…å•ï¼Œè¿™æ ·å¤šå°‘æ”¹å–„äº†æˆ‘çš„æ‹–å»¶ç—‡ğŸ¤ªï¼‰ï¼š</p>
<a id="more"></a>

<ul>
<li><input disabled="" type="checkbox"> é¢å‘åè®®ç¼–ç¨‹</li>
<li><input disabled="" type="checkbox"> ä½¿ç”¨å€¼ç±»å‹ä»£æ›¿å¼•ç”¨ç±»å‹</li>
<li><input disabled="" type="checkbox"> å‡½æ•°å¼ç¼–ç¨‹</li>
<li><input disabled="" type="checkbox"> å•å‘æ•°æ®æµ</li>
</ul>
<p>é¢å‘åè®®ç¼–ç¨‹æ˜¯ Swift ä¸åŒäºå…¶ä»–è¯­è¨€çš„ä¸€ä¸ªç‰¹æ€§ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æ¯” Objective-C å¼ºå¤§çš„ä¸€ä¸ªè¯­è¨€ç‰¹æ€§ï¼ˆå¹¶ä¸æ˜¯Swift ç‹¬æœ‰çš„ï¼Œä½†æ˜¯æ¯” OC çš„åè®®è¦å¼ºå¤§å¾ˆå¤šï¼‰ï¼Œæ‰€ä»¥ä»¥é¢å‘åè®®ç¼–ç¨‹ä½œä¸º Swift ç³»åˆ—æ–‡ç« çš„å¼€ç«¯æ˜¯æœ€åˆé€‚ä¸è¿‡çš„äº†ã€‚</p>
<p>æ–‡ç« çš„å†…å®¹å¯èƒ½æœ‰ç‚¹é•¿ï¼Œæˆ‘å°±æŠŠè¦è®²çš„å†…å®¹ç®€å•åœ°åˆ—äº†ä¸€ä¸‹ï¼ŒåŒå­¦ä»¬å¯ä»¥æ ¹æ®è‡ªå·±æŒæ¡çš„æƒ…å†µï¼Œè·³åˆ°å¯¹åº”çš„å°ç»“è¿›è¡Œé˜…è¯»ã€‚ä¸‹é¢æ˜¯ä¸»è¦å†…å®¹ï¼š</p>
<ul>
<li>é¢å‘åè®®ç¼–ç¨‹ä¸æ˜¯ä¸ªæ–°æ¦‚å¿µ</li>
<li>Swift ä¸­çš„åè®®<ul>
<li>ä»ä¸€ä¸ªç»˜å›¾åº”ç”¨å¼€å§‹ã€‚é€šè¿‡å®ç°ä¸€ä¸ªç»˜å›¾åº”ç”¨ï¼Œæ¥è®²è§£åœ¨ Swift ä¸­ä½¿ç”¨åè®®</li>
<li>å¸¦æœ‰ Self å’Œå…³è”ç±»å‹çš„åè®®<ul>
<li>å¸¦æœ‰ Self çš„åè®®ã€‚é€šè¿‡å®ç°ä¸€ä¸ªäºŒåˆ†æŸ¥æ‰¾ï¼Œæ¥è®²è§£å¦‚ä½•åœ¨åè®®ä¸­ä½¿ç”¨ Self</li>
<li>å¸¦æœ‰å…³è”ç±»å‹çš„åè®®ã€‚é€šè¿‡å®ç°ä¸€ä¸ªå¸¦åŠ è½½åŠ¨ç”»çš„æ•°æ®åŠ è½½å™¨ï¼Œæ¥è®²è§£å¦‚ä½•åœ¨åè®®ä¸­ä½¿ç”¨å…³è”ç±»å‹</li>
</ul>
</li>
<li>åè®®ä¸å‡½æ•°æ´¾å‘ã€‚é€šè¿‡ä¸€ä¸ªä½¿ç”¨å¤šæ€çš„ä¾‹å­ï¼Œæ¥è®²è§£å‡½æ•°æ´¾å‘åœ¨åè®®ä¸­çš„è¡¨ç°</li>
</ul>
</li>
<li>ä½¿ç”¨åè®®æ”¹å–„æ—¢æœ‰çš„ä»£ç è®¾è®¡</li>
</ul>
<h2 id="é¢å‘åè®®ç¼–ç¨‹ä¸æ˜¯ä¸ªæ–°æ¦‚å¿µ"><a href="#é¢å‘åè®®ç¼–ç¨‹ä¸æ˜¯ä¸ªæ–°æ¦‚å¿µ" class="headerlink" title="é¢å‘åè®®ç¼–ç¨‹ä¸æ˜¯ä¸ªæ–°æ¦‚å¿µ"></a>é¢å‘åè®®ç¼–ç¨‹ä¸æ˜¯ä¸ªæ–°æ¦‚å¿µ</h2><p>é¢å‘åè®®ç¼–ç¨‹å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œå®ƒå…¶å®å°±æ˜¯å¹¿ä¸ºæ‰€çŸ¥çš„é¢å‘æ¥å£ç¼–ç¨‹ã€‚é¢å‘åè®®ç¼–ç¨‹ (Protocol Oriented Programming) æ˜¯ Apple åœ¨ 2015 å¹´ WWDC ä¸Šæå‡ºçš„ Swift çš„ä¸€ç§ç¼–ç¨‹èŒƒå¼ã€‚</p>
<p>å¾ˆå¤šç¨‹åºå‘˜éƒ½èƒ½ç†è§£ç±»ã€å¯¹è±¡ã€ç»§æ‰¿å’Œæ¥å£è¿™äº›é¢å‘å¯¹è±¡çš„æ¦‚å¿µï¼ˆä¸çŸ¥é“çš„è‡ªå·±é¢å£å»å•Šï¼‰ã€‚å¯æ˜¯ç±»ä¸æ¥å£çš„åŒºåˆ«ä½•åœ¨ï¼Ÿæœ‰ç±»äº†å¹²å˜›è¦ä½¿ç”¨æ¥å£ï¼Ÿç›¸ä¿¡å¾ˆå¤šäººéƒ½æœ‰è¿™æ ·çš„ç–‘é—®ã€‚æ¥å£ï¼ˆåè®®æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼‰å®šä¹‰äº†ç±»å‹ï¼Œå®ç°æ¥å£ï¼ˆå­ç±»å‹åŒ–ï¼‰è®©æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå¯¹è±¡æ¥ä»£æ›¿å¦ä¸€ä¸ªå¯¹è±¡ã€‚å¦ä¸€æ–¹é¢ï¼Œç±»ç»§æ‰¿æ˜¯é€šè¿‡å¤ç”¨çˆ¶ç±»çš„åŠŸèƒ½æˆ–è€…åªæ˜¯ç®€å•åœ°å…±äº«ä»£ç å’Œè¡¨è¿°ï¼Œæ¥å®šä¹‰å¯¹è±¡çš„å®ç°å’Œç±»å‹çš„ä¸€ç§æœºåˆ¶ã€‚ç±»ç»§æ‰¿è®©æˆ‘ä»¬èƒ½å¤Ÿä»ç°æˆçš„ç±»ç»§æ‰¿æ‰€éœ€è¦å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œä»è€Œå¿«é€Ÿå®šä¹‰æ–°çš„ç±»ã€‚æ‰€ä»¥æ¥å£ä¾§é‡çš„æ˜¯ç±»å‹ï¼ˆæ˜¯æŠŠæŸä¸ªç±»å‹å½“åšå¦ä¸€ç§ç±»å‹æ¥ç”¨ï¼‰ï¼Œè€Œç±»ä¾§é‡çš„æ˜¯å¤ç”¨ã€‚ç†è§£äº†è¿™ä¸ªåŒºåˆ«ä½ å°±çŸ¥é“åœ¨ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ¥å£ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨ç±»äº†ã€‚</p>
<p>GoF åœ¨ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­æåˆ°äº†å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡çš„åŸåˆ™ï¼š</p>
<blockquote>
<p>é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å®ç°ç¼–ç¨‹</p>
</blockquote>
<p>å®šä¹‰å…·æœ‰ç›¸åŒæ¥å£çš„ç±»ç¾¤å¾ˆé‡è¦ï¼Œå› ä¸ºå¤šæ€æ˜¯åŸºäºæ¥å£çš„ã€‚å…¶ä»–é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œç±»å¦‚ Javaï¼Œå…è®¸æˆ‘ä»¬å®šä¹‰ â€œæ¥å£â€ç±»å‹ï¼Œå®ƒç¡®å®šäº†å®¢æˆ·ç«¯åŒæ‰€æœ‰å…¶ä»–å…·ä½“ç±»ç›´æ¥åˆ°ä¸€ç§ â€œåˆçº¦â€ã€‚Objective-C å’Œ Swiftä¸­ä¸ä¹‹å¯¹åº”çš„å°±æ˜¯åè®®ï¼ˆprotocolï¼‰äº†ã€‚åè®®ä¹Ÿæ˜¯å¯¹è±¡ä¹‹é—´çš„ä¸€ç§åˆçº¦ï¼Œä½†æœ¬èº«æ˜¯ä¸èƒ½å¤Ÿå®ä¾‹åŒ–ä¸ºå¯¹è±¡çš„ã€‚å®ç°åè®®æˆ–è€…ä»æŠ½è±¡ç±»ç»§æ‰¿ï¼Œä½¿å¾—å¯¹è±¡å…±äº«ç›¸åŒçš„æ¥å£ã€‚å› æ­¤ï¼Œå­ç±»å‹çš„æ‰€æœ‰å¯¹è±¡ï¼Œéƒ½å¯ä»¥é’ˆå¯¹åè®®æˆ–æŠ½è±¡ç±»çš„æ¥å£åšå‡ºåº”ç­”ã€‚</p>
<h2 id="Swift-ä¸­çš„åè®®"><a href="#Swift-ä¸­çš„åè®®" class="headerlink" title="Swift ä¸­çš„åè®®"></a>Swift ä¸­çš„åè®®</h2><p>åœ¨ WWDC2015 ä¸Šï¼ŒApple å‘å¸ƒäº†Swift 2ã€‚æ–°ç‰ˆæœ¬åŒ…å«äº†å¾ˆå¤šæ–°çš„è¯­è¨€ç‰¹æ€§ã€‚åœ¨ä¼—å¤šæ”¹åŠ¨ä¹‹ä¸­ï¼Œæœ€å¼•äººæ³¨æ„çš„å°±æ˜¯ protocol extensionsã€‚åœ¨ Swift ç¬¬ä¸€ç‰ˆä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ extension æ¥ä¸ºå·²æœ‰çš„ classï¼Œstruct æˆ– enum æ‹“å±•åŠŸèƒ½ã€‚è€Œåœ¨ Swift 2 ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸º protocol æ·»åŠ  extensionã€‚å¯èƒ½ä¸€å¼€å§‹çœ‹ä¸Šå»è¿™ä¸ªæ–°ç‰¹æ€§å¹¶ä¸èµ·çœ¼ï¼Œå®é™…ä¸Š protocol extensions éå¸¸å¼ºå¤§ï¼Œä»¥è‡³äºå¯ä»¥æ”¹å˜ Swift ä¹‹å‰çš„æŸäº›ç¼–ç¨‹æ€æƒ³ã€‚åé¢æˆ‘ä¼šç»™å‡ºä¸€ä¸ª protocol extension åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨æ¡ˆä¾‹ã€‚</p>
<p>é™¤äº†åè®®æ‹“å±•ï¼ŒSwift ä¸­çš„åè®®è¿˜æœ‰ä¸€äº›å…·æœ‰å…¶ä»–ç‰¹æ€§çš„åè®®ï¼Œæ¯”å¦‚å¸¦æœ‰å…³è”ç±»å‹çš„åè®®ã€åŒ…å« Self çš„åè®®ã€‚è¿™ä¸¤ç§åè®®è·Ÿæ™®é€šçš„åè®®è¿˜æ˜¯æœ‰ä¸€äº›ä¸åŒçš„ï¼Œåé¢æˆ‘ä¹Ÿä¼šç»™å‡ºå…·ä½“çš„ä¾‹å­ã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥å¼€å§‹ç¼–å†™ä»£ç ï¼Œæ¥æŒæ¡åœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨ Swift åè®®çš„æŠ€å·§ã€‚ä¸‹é¢çš„ç»˜å›¾åº”ç”¨å’ŒäºŒåˆ†æŸ¥æ‰¾çš„ä¾‹å­æ˜¯æ¥è‡ª WWDC2015 ä¸­<a href="https://developer.apple.com/videos/play/wwdc2015/408/" target="_blank" rel="noopener">è¿™ä¸ª Session</a>ã€‚åœ¨å†™æœ¬æ–‡å‰ï¼Œç¬”è€…ä¹Ÿæƒ³äº†å¾ˆå¤šä¾‹å­ï¼Œä½†æ˜¯å§‹ç»ˆè§‰å¾—æ²¡æœ‰å®˜æ–¹çš„ä¾‹å­å¥½ã€‚æ‰€ä»¥æˆ‘çš„å»ºè®®æ˜¯ï¼š<a href="https://developer.apple.com/videos/play/wwdc2015/408/" target="_blank" rel="noopener">è¿™ä¸ª Session</a> è‡³å°‘è¦çœ‹ä¸€éã€‚çœ‹äº†ä¸€éåï¼Œå¼€å§‹å†™è‡ªå·±çš„å®ç°ã€‚</p>
<h3 id="ä»ä¸€ä¸ªç»˜å›¾åº”ç”¨å¼€å§‹"><a href="#ä»ä¸€ä¸ªç»˜å›¾åº”ç”¨å¼€å§‹" class="headerlink" title="ä»ä¸€ä¸ªç»˜å›¾åº”ç”¨å¼€å§‹"></a>ä»ä¸€ä¸ªç»˜å›¾åº”ç”¨å¼€å§‹</h3><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å…ˆé€šè¿‡å®Œæˆä¸€ä¸ªå…·ä½“çš„éœ€æ±‚ï¼Œæ¥å­¦ä¹ å¦‚ä½•åœ¨ Swift ä¸­ä½¿ç”¨åè®®ã€‚</p>
<p>æˆ‘ä»¬çš„éœ€æ±‚æ˜¯å®ç°ä¸€ä¸ªå¯ä»¥ç»˜åˆ¶å¤æ‚å›¾å½¢çš„ç»˜å›¾ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥å…ˆé€šè¿‡ä¸€ä¸ª Render æ¥å®šä¹‰ä¸€ä¸ªç®€å•çš„ç»˜åˆ¶è¿‡ç¨‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Renderer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">move</span><span class="params">(to p: CGPoint)</span></span> &#123; <span class="built_in">print</span>(<span class="string">"move to (\(p.x), \(p.y))"</span>) &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">line</span><span class="params">(to p: CGPoint)</span></span> &#123; <span class="built_in">print</span>(<span class="string">"line to (\(p.x), \(p.y))"</span>)&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">arc</span><span class="params">(at center: CGPoint, radius: CGFloat, starAngle: CGFloat, endAngle: CGFloat)</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"arc at center: \(center), radius: \(radius), startAngel: \(starAngle), endAngle: \(endAngle)"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå¯ä»¥å®šä¹‰ä¸€ä¸ª Drawable åè®®æ¥å®šä¹‰ä¸€ä¸ªç»˜åˆ¶æ“ä½œï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">draw</span><span class="params">(with render: Renderer)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Drawable åè®®å®šä¹‰äº†ä¸€ä¸ªç»˜åˆ¶æ“ä½œï¼Œå®ƒæ¥å—ä¸€ä¸ªå…·ä½“çš„ç»˜åˆ¶å·¥å…·æ¥è¿›è¡Œç»˜å›¾ã€‚è¿™é‡Œå°†å¯ç»˜åˆ¶çš„å†…å®¹å’Œå®é™…çš„ç»˜åˆ¶æ“ä½œåˆ†å¼€äº†ï¼Œè¿™ä¹ˆåšçš„ç›®çš„æ˜¯ä¸ºäº†èŒè´£åˆ†ç¦»ï¼Œåœ¨åé¢ä½ ä¼šçœ‹åˆ°è¿™ç§è®¾è®¡çš„å¥½å¤„ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³ç»˜åˆ¶ä¸€ä¸ªåœ†ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç®€å•åœ°åˆ©ç”¨ä¸Šé¢å®ç°å¥½äº†çš„ç»˜åˆ¶å·¥å…·æ¥ç»˜åˆ¶ä¸€ä¸ªåœ†å½¢ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Circle</span>: <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> center: <span class="type">CGPoint</span></span><br><span class="line">    <span class="keyword">let</span> radius: <span class="type">CGFloat</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">draw</span><span class="params">(with render: Renderer)</span></span> &#123;</span><br><span class="line">        render.arc(at: center, radius: radius, starAngle: <span class="number">0</span>, endAngle: <span class="type">CGFloat</span>.pi * <span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘ä»¬åˆæƒ³è¦ç»˜åˆ¶ä¸€ä¸ªå¤šè¾¹å½¢ï¼Œé‚£ä¹ˆæœ‰äº† Drawable åè®®ï¼Œå®ç°èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Polygon</span>: <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> corners: [<span class="type">CGPoint</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">draw</span><span class="params">(with render: Renderer)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> corners.isEmpty &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        render.move(to: corners.last!)</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> corners &#123; render.line(to: p) &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç®€å•å›¾å½¢çš„ç»˜åˆ¶å·²ç»å®Œæˆäº†ï¼Œç°åœ¨å¯ä»¥å®Œæˆæˆ‘ä»¬è¿™ä¸ªç»˜å›¾ç¨‹åºäº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Diagram</span>: <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> elements: [<span class="type">Drawable</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">draw</span><span class="params">(with render: Renderer)</span></span> &#123;</span><br><span class="line">        <span class="keyword">for</span> ele <span class="keyword">in</span> elements &#123; ele.draw(with: render) &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> render = <span class="type">Renderer</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> circle = <span class="type">Circle</span>(center: <span class="type">CGPoint</span>(x: <span class="number">100</span>, y: <span class="number">100</span>), radius: <span class="number">100</span>)</span><br><span class="line"><span class="keyword">let</span> triangle = <span class="type">Polygon</span>(corners: [</span><br><span class="line">    <span class="type">CGPoint</span>(x: <span class="number">100</span>, y: <span class="number">0</span>),</span><br><span class="line">    <span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">150</span>),</span><br><span class="line">    <span class="type">CGPoint</span>(x: <span class="number">200</span>, y: <span class="number">150</span>)])</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> client = <span class="type">Diagram</span>(elements: [triangle, circle])</span><br><span class="line">client.draw(with: render)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Result:</span></span><br><span class="line"><span class="comment">// move to (200.0, 150.0)</span></span><br><span class="line"><span class="comment">// line to (100.0, 0.0)</span></span><br><span class="line"><span class="comment">// line to (0.0, 150.0)</span></span><br><span class="line"><span class="comment">// line to (200.0, 150.0)</span></span><br><span class="line"><span class="comment">// arc at center: (100.0, 100.0), radius: 100.0, startAngel: 0.0, endAngle: 6.28318530717959</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä¸Šé¢çš„ä»£ç å¾ˆå®¹æ˜“å°±å®ç°äº†ä¸€ä¸ªç®€å•çš„ç»˜å›¾ç¨‹åºäº†ã€‚ä¸è¿‡ï¼Œç›®å‰è¿™ä¸ªç»˜å›¾ç¨‹åºåªèƒ½åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºç»˜åˆ¶çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬æƒ³æŠŠå®ƒç»˜åˆ¶åˆ°å±å¹•ä¸Šæ€ä¹ˆåŠå‘¢ï¼Ÿè¦æƒ³æŠŠå†…å®¹ç»˜åˆ¶åˆ°å±å¹•ä¸Šå…¶å®ä¹Ÿç®€å•çš„å¾ˆï¼Œä»ç„¶æ˜¯ä½¿ç”¨åè®®ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Renderer ç»“æ„ä½“æ”¹æˆ protocolï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Renderer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">move</span><span class="params">(to p: CGPoint)</span></span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">line</span><span class="params">(to p: CGPoint)</span></span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">arc</span><span class="params">(at center: CGPoint, radius: CGFloat, starAngle: CGFloat, endAngle: CGFloat)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®Œæˆäº† Renderer çš„æ”¹é€ ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CoreGraphics æ¥åœ¨å±å¹•ä¸Šç»˜åˆ¶å›¾å½¢äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">CGContext</span>: <span class="title">Renderer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">line</span><span class="params">(to p: CGPoint)</span></span> &#123;</span><br><span class="line">        addLine(to: p)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">arc</span><span class="params">(at center: CGPoint, radius: CGFloat, starAngle: CGFloat, endAngle: CGFloat)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> path = <span class="type">CGMutablePath</span>()</span><br><span class="line">        path.addArc(center: center, radius: radius, startAngle: starAngle, endAngle: endAngle, clockwise: <span class="literal">true</span>)</span><br><span class="line">        addPath(path)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡æ‹“å±• CGContextï¼Œä½¿å…¶éµå®ˆ Renderer åè®®ï¼Œç„¶åä½¿ç”¨ CGContext æä¾›çš„æ¥å£éå¸¸ç®€å•çš„å®ç°äº†ç»˜åˆ¶å·¥ä½œã€‚ ä¸‹å›¾æ˜¯è¿™ä¸ªç»˜å›¾ç¨‹åºæœ€ç»ˆçš„æ•ˆæœï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/render.png" alt=""></p>
<p>å®Œæˆä¸Šé¢ç»˜å›¾ç¨‹åºçš„å…³é”®ï¼Œæ˜¯å°†å›¾å½¢çš„å®šä¹‰å’Œå®é™…ç»˜åˆ¶æ“ä½œæ‹†å¼€äº†ï¼Œé€šè¿‡è®¾è®¡ <code>Drawable</code> å’Œ <code>Renderer</code> ä¸¤ä¸ªåè®®ï¼Œå®Œæˆäº†ä¸€ä¸ªé«˜æ‹“å±•çš„ç¨‹åºã€‚æƒ³ç»˜åˆ¶å…¶ä»–å½¢çŠ¶ï¼Œåªè¦å®ç°ä¸€ä¸ªæ–°çš„ Drawable å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚æˆ‘æƒ³ç»˜åˆ¶ä¸‹é¢è¿™æ ·çš„å›¾å½¢ï¼š</p>
<img src="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/render2.png" width="390px" height="390px" />

<p>æˆ‘ä»¬å¯ä»¥å°†åŸæ¥çš„ Diagram è¿›è¡Œç¼©æ”¾å°±å¯ä»¥äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> big = <span class="type">Diagram</span>(elements: [triangle, circle])</span><br><span class="line">diagram = <span class="type">Diagram</span>(elements: [big, big.scaled(by: <span class="number">0.2</span>)])</span><br></pre></td></tr></table></figure>

<p>è€Œé€šè¿‡å®ç° Renderer åè®®ï¼Œä½ æ—¢å¯ä»¥å®ŒæˆåŸºäºæ§åˆ¶å°çš„ç»˜å›¾ç¨‹åºä¹Ÿå¯ä»¥å®Œæˆä½¿ç”¨ CoreGraphics çš„ç»˜å›¾ç¨‹åºï¼Œç”šè‡³å¯ä»¥å¾ˆç®€å•åœ°å°±èƒ½å®ç°ä¸€ä¸ªä½¿ç”¨ OpenGL çš„ç»˜å›¾ç¨‹åºã€‚è¿™ç§ç¼–ç¨‹æ€æƒ³ï¼Œåœ¨ç¼–å†™è·¨å¹³å°çš„ç¨‹åºæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p>
<h3 id="å¸¦æœ‰-Self-å’Œå…³è”ç±»å‹çš„åè®®"><a href="#å¸¦æœ‰-Self-å’Œå…³è”ç±»å‹çš„åè®®" class="headerlink" title="å¸¦æœ‰ Self å’Œå…³è”ç±»å‹çš„åè®®"></a>å¸¦æœ‰ Self å’Œå…³è”ç±»å‹çš„åè®®</h3><p>æˆ‘åœ¨å‰é¢éƒ¨åˆ†å·²ç»æŒ‡å‡ºï¼Œå¸¦æœ‰å…³è”ç±»å‹çš„åè®®å’Œæ™®é€šçš„åè®®æ˜¯æœ‰ä¸€äº›ä¸åŒçš„ã€‚å¯¹äºé‚£äº›åœ¨åè®®ä¸­ä½¿ç”¨äº† Self å…³é”®å­—çš„åè®®æ¥è¯´ä¹Ÿæ˜¯å¦‚æ­¤ã€‚åœ¨ Swift 3 ä¸­ï¼Œè¿™æ ·çš„åè®®ä¸èƒ½è¢«å½“ä½œç‹¬ç«‹çš„ç±»å‹æ¥ä½¿ç”¨ã€‚è¿™ä¸ªé™åˆ¶å¯èƒ½ä¼šåœ¨ä»Šåå®ç°äº†å®Œæ•´çš„æ³›å‹ç³»ç»Ÿåè¢«ç§»é™¤ï¼Œä½†æ˜¯åœ¨é‚£ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½å¿…é¡»è¦é¢å¯¹å’Œå¤„ç†è¿™ä¸ªé™åˆ¶ã€‚</p>
<h4 id="å¸¦æœ‰-Self-çš„åè®®"><a href="#å¸¦æœ‰-Self-çš„åè®®" class="headerlink" title="å¸¦æœ‰ Self çš„åè®®"></a>å¸¦æœ‰ Self çš„åè®®</h4><p>æˆ‘ä»¬ä»ç„¶ä»ä¸€ä¸ªä¾‹å­å¼€å§‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">binarySearch</span><span class="params">(<span class="number">_</span> keys: [Int], <span class="keyword">for</span> key: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> lo = <span class="number">0</span>, hi = keys.<span class="built_in">count</span> - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> lo &lt;= hi &#123;</span><br><span class="line">        <span class="keyword">let</span> mid = lo + (hi - lo) / <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> keys[mid] == key &#123; <span class="keyword">return</span> mid &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> keys[mid] &lt; key &#123; lo = mid + <span class="number">1</span> &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; hi = mid - <span class="number">1</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> position = binarySearch([<span class="type">Int</span>](<span class="number">1</span>...<span class="number">10</span>), <span class="keyword">for</span>: <span class="number">3</span>)</span><br><span class="line"><span class="comment">// result: 2</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç å®ç°äº†ä¸€ä¸ªç®€å•çš„äºŒåˆ†æŸ¥æ‰¾ï¼Œä½†æ˜¯ç›®å‰åªæ”¯æŒæŸ¥æ‰¾ Int ç±»å‹çš„æ•°æ®ã€‚å¦‚æœæƒ³æ”¯æŒå…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œæˆ‘ä»¬å¿…é¡»å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œæ”¹é€ ï¼Œæ”¹é€ çš„æ–¹å‘å°±æ˜¯ä½¿ç”¨ protocolï¼Œä¾‹å¦‚æˆ‘å¯ä»¥æ·»åŠ ä¸‹é¢çš„å®ç°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Ordered</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">precedes</span><span class="params">(other: Ordered)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">equal</span><span class="params">(to other: Ordered)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">binarySearch</span><span class="params">(<span class="number">_</span> keys: [Ordered], <span class="keyword">for</span> key: Ordered)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> lo = <span class="number">0</span>, hi = keys.<span class="built_in">count</span> - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> lo &lt;= hi &#123;</span><br><span class="line">        <span class="keyword">let</span> mid = lo + (hi - lo) / <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> keys[mid].<span class="built_in">equal</span>(to: key) &#123; <span class="keyword">return</span> mid &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> keys[mid].precedes(other: key) &#123; lo = mid + <span class="number">1</span> &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; hi = mid - <span class="number">1</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†æ”¯æŒæŸ¥æ‰¾ Int ç±»å‹æ•°æ®ï¼Œæˆ‘ä»¬å°±å¿…é¡»è®© Int å®ç° <code>Oredered</code> åè®®ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/binarysearch1.png" alt=""></p>
<p>å†™å®Œä¸Šé¢çš„å®ç°ï¼Œå‘ç°ä»£ç æ ¹æœ¬å°±ä¸èƒ½æ‰§è¡Œï¼ŒæŠ¥é”™è¯´çš„æ˜¯ Int ç±»å‹å’Œ Oredered ç±»å‹ä¸èƒ½ä½¿ç”¨ <code>&lt;</code> è¿›è¡Œæ¯”è¾ƒï¼Œä¸‹é¢çš„ <code>==</code> ä¹Ÿæ˜¯ä¸€æ ·ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ protocol ä¸­ä½¿ç”¨ Selfï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Ordered</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">precedes</span><span class="params">(other: <span class="keyword">Self</span>)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">equal</span><span class="params">(to other: <span class="keyword">Self</span>)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Int</span>: <span class="title">Ordered</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">precedes</span><span class="params">(other: Int)</span></span> -&gt; <span class="type">Bool</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> &lt; other &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">equal</span><span class="params">(to other: Int)</span></span> -&gt; <span class="type">Bool</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> == other &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ Oredered ä¸­ä½¿ç”¨äº† Self åï¼Œç¼–è¯‘å™¨ä¼šåœ¨å®ç°ä¸­å°† Self æ›¿æ¢æˆå…·ä½“çš„ç±»å‹ï¼Œå°±åƒä¸Šé¢çš„ä»£ç ä¸­ï¼Œå°† Self æ›¿æ¢æˆäº† Intã€‚è¿™æ ·æˆ‘ä»¬å°±è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ã€‚ä½†æ˜¯åˆå‡ºç°äº†æ–°çš„é—®é¢˜ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/binarysearch2.png" alt=""></p>
<p>è¿™å°±æ˜¯ä¸Šé¢æ‰€è¯´çš„ï¼Œå¸¦æœ‰ Self çš„åè®®ä¸èƒ½è¢«å½“ä½œç‹¬ç«‹çš„ç±»å‹æ¥ä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³›å‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">binarySearch</span>&lt;T: Ordered&gt;<span class="params">(<span class="number">_</span> keys: [T], <span class="keyword">for</span> key: T)</span></span> -&gt; <span class="type">Int</span> &#123;...&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯ String ç±»å‹çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬çš„äºŒåˆ†æŸ¥æ‰¾äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">String</span>: <span class="title">Ordered</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">precedes</span><span class="params">(other: String)</span></span> -&gt; <span class="type">Bool</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> &lt; other &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">equal</span><span class="params">(to other: String)</span></span> -&gt; <span class="type">Bool</span> &#123; <span class="keyword">return</span> <span class="keyword">self</span> == other &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> position = binarySearch([<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>], <span class="keyword">for</span>: <span class="string">"d"</span>)</span><br><span class="line"><span class="comment">// result: 3</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œå¦‚æœä½ ç†Ÿæ‚‰ Swift æ ‡å‡†åº“ä¸­çš„åè®®çš„è¯ï¼Œä½ ä¼šå‘ç°ä¸Šé¢çš„å®ç°å¯ä»¥ç®€åŒ–ä¸ºä¸‹é¢çš„å‡ è¡Œä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">binarySearch</span>&lt;T: Comparable&gt;<span class="params">(<span class="number">_</span> keys: [T], <span class="keyword">for</span> key: T)</span></span> -&gt; <span class="type">Int?</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> lo = <span class="number">0</span>, hi = keys.<span class="built_in">count</span> - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> lo &lt;= hi &#123;</span><br><span class="line">        <span class="keyword">let</span> mid = lo + (hi - lo) / <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> keys[mid] == key &#123; <span class="keyword">return</span> mid &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> keys[mid] &lt; key &#123; lo = mid + <span class="number">1</span> &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; hi = mid - <span class="number">1</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰ Ordered åè®®åªæ˜¯ä¸ºäº†æ¼”ç¤ºåœ¨åè®®ä¸­ä½¿ç”¨ Self çš„è¿‡ç¨‹ã€‚å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥çµæ´»åœ°è¿ç”¨æ ‡å‡†åº“ä¸­æä¾›çš„åè®®ã€‚å…¶å®åœ¨æ ‡å‡†åº“ä¸­ Comparable åè®®ä¸­ä¹Ÿæ˜¯ç”¨åˆ°äº† Self çš„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Comparable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> &gt; <span class="params">(lhs: <span class="keyword">Self</span>, rhs: <span class="keyword">Self</span>)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢é€šè¿‡å®ç°ä¸€ä¸ªäºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨å¸¦æœ‰ Self çš„åè®®ã€‚ç®€å•æ¥è®²ï¼Œä½ å¯ä»¥æŠŠ Self çœ‹åšä¸€ä¸ªå ä½ç¬¦ï¼Œåœ¨åé¢å…·ä½“ç±»å‹çš„å®ç°ä¸­å¯ä»¥æ›¿æ¢æˆå®é™…çš„ç±»å‹ã€‚</p>
<h4 id="å¸¦æœ‰å…³è”ç±»å‹çš„åè®®"><a href="#å¸¦æœ‰å…³è”ç±»å‹çš„åè®®" class="headerlink" title="å¸¦æœ‰å…³è”ç±»å‹çš„åè®®"></a>å¸¦æœ‰å…³è”ç±»å‹çš„åè®®</h4><p>å¸¦æœ‰å…³è”ç±»å‹çš„åè®®ä¹Ÿä¸èƒ½è¢«å½“ä½œç‹¬ç«‹çš„ç±»å‹æ¥ä½¿ç”¨ã€‚åœ¨ Swift ä¸­è¿™æ ·çš„åè®®éå¸¸å¤šï¼Œä¾‹å¦‚ Collectionï¼ŒSequenceï¼ŒIteratorProtocol ç­‰ç­‰ã€‚å¦‚æœä½ ä»ç„¶æƒ³ä½¿ç”¨è¿™ç§åè®®ä½œä¸ºç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ç§å«åšç±»å‹æ“¦é™¤çš„æŠ€æœ¯ã€‚ä½ å¯ä»¥ä»<a href="http://jewelz.me/cjs77iamr00028is6rdrwj0cw/" target="_blank" rel="noopener">è¿™é‡Œ</a>äº†è§£å¦‚ä½•å®ç°å®ƒã€‚</p>
<p>ä¸‹é¢ä»ç„¶é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å¸¦æœ‰å…³è”ç±»å‹çš„åè®®ã€‚è¿™æ¬¡æˆ‘ä»¬è¦é€šè¿‡åè®®å®ç°ä¸€ä¸ªå¸¦æœ‰åŠ è½½åŠ¨ç”»çš„æ•°æ®åŠ è½½å™¨ï¼Œå¹¶ä¸”åœ¨å‡ºé”™æ—¶å±•ç¤ºç›¸åº”çš„å ä½å›¾ã€‚</p>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Loading åè®®ï¼Œä»£è¡¨å¯ä»¥åŠ è½½æ•°æ®ï¼Œä¸è¿‡è¦æ»¡è¶³ Loading åè®®ï¼Œå¿…é¡»è¦æä¾›ä¸€ä¸ª <code>loadingView</code>ï¼Œè¿™é‡Œçš„ <code>loadingView</code> å°±æ˜¯åè®®ä¸­å…³è”ç±»å‹çš„å®ä¾‹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Loading</span>: <span class="title">class</span> </span>&#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">LoadingView</span>: <span class="type">UIView</span>, <span class="type">LoadingViewType</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> loadingView: <span class="type">LoadingView</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> Loading åè®®ä¸­çš„å…³è”ç±»å‹æœ‰ä¸¤ä¸ªè¦æ±‚ï¼Œé¦–å…ˆå¿…é¡»æ˜¯ UIView çš„å­ç±»ï¼Œå…¶æ¬¡éœ€è¦éµå®ˆ LoadingViewType åè®®ã€‚LoadingViewType å¯ä»¥ç®€å•å®šä¹‰æˆä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">LoadingViewType</span>: <span class="title">class</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> isAnimating: <span class="type">Bool</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> isError: <span class="type">Bool</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">startAnimating</span><span class="params">()</span></span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">stopAnimating</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥åœ¨ Loading åè®®çš„æ‹“å±•ä¸­å®šä¹‰ä¸€äº›è·ŸåŠ è½½é€»è¾‘ç›¸å…³çš„æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Loading</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">startLoading</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> !view.subviews.<span class="built_in">contains</span>(loadingView) &#123;</span><br><span class="line">            view.addSubview(loadingView)</span><br><span class="line">            loadingView.frame = view.bounds</span><br><span class="line">        &#125;</span><br><span class="line">        view.bringSubview(toFront: loadingView)</span><br><span class="line">        loadingView.startAnimating()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">stopLoading</span><span class="params">()</span></span> &#123;</span><br><span class="line">        loadingView.stopAnimating()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥ç»§ç»­ç»™ Loading æ·»åŠ ä¸€ä¸ªå¸¦ç½‘ç»œæ•°æ®åŠ è½½çš„é€»è¾‘ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Loading</span> <span class="title">where</span> <span class="title">Self</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadData</span><span class="params">(with re: Resource, completion: @escaping <span class="params">(Result)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        startLoading()</span><br><span class="line">        <span class="type">NetworkTool</span>.shared.request(re) &#123; result <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">case</span> .succeed = result <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">self</span>.loadingView.isError = <span class="literal">true</span> <span class="comment">// æ˜¾ç¤ºå‡ºé”™çš„è§†å›¾ï¼Œè¿™é‡Œå¯ä»¥æ ¹æ®é”™è¯¯ç±»å‹æ˜¾ç¤ºå¯¹åº”çš„è§†å›¾ï¼Œè¿™é‡Œç®€å•å¤„ç†äº†</span></span><br><span class="line">                <span class="keyword">self</span>.stopLoading()</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            completion(result)</span><br><span class="line">            <span class="keyword">self</span>.loadingView.isError = <span class="literal">false</span></span><br><span class="line">            <span class="keyword">self</span>.stopLoading()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šå°±æ˜¯æ•´ä¸ª Loading åè®®çš„å®ç°ã€‚è¿™é‡Œè·Ÿä¸Šé¢çš„ä¾‹å­ä¸åŒï¼Œè¿™å„¿ä¸»è¦ä½¿ç”¨äº†åè®®çš„æ‹“å±•æ¥å®ç°éœ€æ±‚ã€‚è¿™æ ·åšçš„åŸå› ï¼Œæ˜¯å› ä¸ºæ‰€æœ‰çš„åŠ è½½é€»è¾‘å‡ ä¹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¯èƒ½çš„åŒºåˆ«å°±æ˜¯åŠ è½½çš„åŠ¨ç”»ä¸åŒã€‚æ‰€ä»¥è¿™é‡ŒæŠŠè´Ÿè´£åŠ¨ç”»çš„éƒ¨åˆ†æ”¾åˆ°äº†  LoadingViewType åè®®é‡Œï¼ŒLoading çš„åŠ è½½é€»è¾‘éƒ½æ”¾åˆ°åè®®çš„æ‹“å±•é‡Œè¿›è¡Œå®šä¹‰ã€‚åè®®å£°æ˜é‡Œå®šä¹‰çš„æ–¹æ³•ä¸åœ¨åè®®æ‹“å±•é‡Œå®šä¹‰çš„æ–¹æ³•å…¶å®æ˜¯æœ‰åŒºåˆ«çš„ï¼Œåé¢ä¹Ÿä¼šç»™å‡ºä¸€ä¸ªä¾‹å­æ¥è¯´æ˜å®ƒä»¬éƒ½åŒºåˆ«ã€‚</p>
<p>è¦æƒ³è®© ViewController æœ‰åŠ è½½æ•°æ®çš„åŠŸèƒ½ï¼Œåªè¦è®©æ§åˆ¶å™¨éµå®ˆ Loading åè®®å°±è¡Œï¼Œç„¶ååœ¨åˆé€‚çš„åœ°æ–¹è°ƒç”¨ <code>loadData</code> æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span>, <span class="title">Loading</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> loadingView = <span class="type">TestLoadingView</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        loadData(with: <span class="type">Test</span>.justEmpty) &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æ˜¯è¿è¡Œç»“æœï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/hujewelz/CDN-for-myblog/images/swiftprotocol/loading.gif" alt=""></p>
<p>æˆ‘ä»¬åªè¦è®©æ§åˆ¶å™¨éµå®ˆ Loading åè®®ï¼Œå°±å®ç°äº†ä»ç½‘ç»œåŠ è½½æ•°æ®å¹¶å¸¦æœ‰åŠ è½½åŠ¨ç”»ï¼Œè€Œä¸”åœ¨å‡ºé”™æ—¶æ˜¾ç¤ºé”™è¯¯è§†å›¾çš„åŠŸèƒ½ã€‚è¿™é‡Œè‚¯å®šæœ‰äººä¼šè¯´ï¼Œä½¿ç”¨ç»§æ‰¿ä¹Ÿå¯ä»¥å®ç°ä¸Šè¿°éœ€æ±‚ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåè®®ä¸­çš„åŠ è½½é€»è¾‘éƒ½æ”¾åˆ°ä¸€ä¸ªåŸºç±»ä¸­ï¼Œä¹Ÿå¯ä»¥å®ç°è¯¥éœ€æ±‚ã€‚å¦‚æœåé¢åˆè¦æ·»åŠ åˆ·æ–°å’Œåˆ†é¡µåŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™äº›ä»£ç ä¹Ÿåªèƒ½æ”¾åˆ°åŸºç±»ä¸­ï¼Œè¿™æ ·å°±ä¼šéšç€é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼ŒåŸºç±»ä¹Ÿå˜å¾—è¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä¸Šå¸ç±»ã€‚å¦‚æœæˆ‘ä»¬å°†æ•°æ®åŠ è½½ã€åˆ·æ–°ã€åˆ†é¡µä½œä¸ºä¸åŒçš„åè®®ï¼Œè®©æ§åˆ¶å™¨éœ€è¦ä»€ä¹ˆå°±éµå®ˆç›¸åº”çš„åè®®ï¼Œé‚£ä¹ˆæ§åˆ¶å™¨å°±ä¸ä¼šåŒ…å«é‚£äº›å®ƒä¸éœ€è¦çš„åŠŸèƒ½äº†ã€‚è¿™å°±åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œå¯ä»¥çµæ´»åœ°ç»™ç¨‹åºæ·»åŠ å®ƒéœ€è¦çš„å†…å®¹ã€‚</p>
<h3 id="åè®®ä¸å‡½æ•°æ´¾å‘"><a href="#åè®®ä¸å‡½æ•°æ´¾å‘" class="headerlink" title="åè®®ä¸å‡½æ•°æ´¾å‘"></a>åè®®ä¸å‡½æ•°æ´¾å‘</h3><p>å‡½æ•°æ´¾å‘å°±æ˜¯ä¸€ä¸ªç¨‹åºåœ¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå¦‚ä½•é€‰æ‹©è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„è¿‡ç¨‹ã€‚å½“æˆ‘ä»¬æ¯æ¬¡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶å‡½æ•°æ´¾å‘éƒ½ä¼šå‘ç”Ÿã€‚</p>
<p>ç¼–è¯‘å‹è¯­è¨€æœ‰ä¸‰ç§åŸºç¡€çš„å‡½æ•°æ´¾å‘æ–¹å¼ï¼šç›´æ¥æ´¾å‘(Direct Dispatch)ï¼Œå‡½æ•°è¡¨(Table Dispatch) å’Œæ¶ˆæ¯(Message Dispatch)ã€‚å¤§éƒ¨åˆ†è¯­è¨€æ”¯æŒä¸€åˆ°ä¸¤ç§ã€‚Java é»˜è®¤ä½¿ç”¨å‡½æ•°è¡¨æ´¾å‘ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>final</code> å…³é”®å­—å°†å…¶å˜ä¸ºç›´æ¥æ´¾å‘ã€‚C++ é»˜è®¤ä½¿ç”¨ç›´æ¥æ´¾å‘ï¼Œé€šè¿‡ <code>virtual</code> å…³é”®å­—å¯ä»¥æ”¹ä¸ºå‡½æ•°è¡¨æ´¾å‘ã€‚Objective-C æ€»æ˜¯ä½¿ç”¨æ¶ˆæ¯æ´¾å‘ï¼Œä½†å…è®¸å¼€å‘è€…ä½¿ç”¨ C ç›´æ¥æ´¾å‘æ¥è·å–æ€§èƒ½çš„æé«˜ï¼ˆæ¯”å¦‚ç›´æ¥è°ƒç”¨ IMPï¼‰ã€‚Swift åœ¨è¿™æ–¹é¢èµ°åœ¨äº†å‰é¢ï¼Œå¥¹æ”¯æŒå…¨éƒ¨çš„3ç§æ´¾å‘æ–¹å¼ã€‚è¿™æ ·çš„æ–¹å¼éå¸¸å¥½,ï¼Œä¸è¿‡ä¹Ÿç»™å¾ˆå¤šSwiftå¼€å‘è€…å¸¦æ¥äº†å›°æ‰°ã€‚</p>
<p>è¿™é‡Œåªç®€å•è¯´ä¸€ä¸‹å‡½æ•°æ´¾å‘åœ¨ protocol ä¸­çš„ä¸åŒè¡¨ç°ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Flyable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fly</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢å®šä¹‰äº† Flyable åè®®ï¼Œè¡¨ç¤ºäº†é£è¡Œçš„èƒ½åŠ›ã€‚éµå®ˆè¯¥åè®®å°±å¿…é¡»å®ç° <code>fly()</code> æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥æä¾›å‡ ä¸ªå®ç°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Eagle</span>: <span class="title">Flyable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fly</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"ğŸ¦… is flying"</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Plane</span>: <span class="title">Flyable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fly</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"âœˆï¸ is flying"</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†™ä¸ªå®¢æˆ·ç«¯ç¨‹åºæµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fls: [<span class="type">Flyable</span>] = [<span class="type">Eagle</span>(), <span class="type">Plane</span>()]</span><br><span class="line"><span class="keyword">for</span> fl <span class="keyword">in</span> fls &#123;</span><br><span class="line">    fl.fly()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// result:</span></span><br><span class="line">ğŸ¦… <span class="keyword">is</span> flying</span><br><span class="line">âœˆï¸ <span class="keyword">is</span> flying</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æµ‹è¯•ç¨‹åºçš„è¿è¡Œç»“æœå’Œæˆ‘ä»¬çš„è®¾æƒ³å®Œå…¨ä¸€æ ·ã€‚ä¸Šé¢ <code>fly()</code> æ–¹æ³•æ˜¯åœ¨åè®®çš„å®šä¹‰é‡Œè¿›è¡Œå£°æ˜çš„ï¼Œç°åœ¨æˆ‘ä»¬æŠŠå®ƒæ”¾åˆ°åè®®æ‹“å±•é‡Œè¿›è¡Œå£°æ˜ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Flyable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fly</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">"Something is flying"</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿è¡Œå‰ä½ å¯ä»¥å…ˆçŒœæµ‹ä¸€ä¸‹è¿è¡Œçš„ç»“æœã€‚</p>
<p>å…ˆæš‚åœ 3 ç§’é’Ÿâ€¦</p>
<p>ä¸‹é¢æ˜¯è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Something is flying</span><br><span class="line">Something is flying</span><br></pre></td></tr></table></figure>

<p>ä½ çœ‹ï¼Œæˆ‘ä»¬åªæ˜¯ç®€å•åœ°æŠŠåœ¨åè®®å®šä¹‰é‡Œçš„æ–¹æ³•æŒªåˆ°äº†åè®®æ‹“å±•é‡Œï¼Œè¿è¡Œç»“æœå´å®Œå…¨ä¸åŒã€‚å‡ºç°åƒä¸Šé¢é‚£æ ·çš„è¿è¡Œç»“æœè¿˜è·Ÿè¿™è¡Œä»£ç æœ‰å…³ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fls: [<span class="type">Flyable</span>] = [<span class="type">Eagle</span>(), <span class="type">Plane</span>()]</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ç›´æ¥ä½¿ç”¨å…·ä½“ç±»å‹è¿›è¡Œè°ƒç”¨ï¼Œè‚¯å®šæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Eagle</span>().fly() 	<span class="comment">// ğŸ¦… is flying</span></span><br><span class="line"><span class="type">Plane</span>().fly() 	<span class="comment">// âœˆï¸ is flying</span></span><br></pre></td></tr></table></figure>

<p>å‡ºç°ä¸Šé¢ä¸¤ç§å®Œå…¨ä¸åŒçš„ç»“æœï¼Œä¸»è¦æ˜¯å› ä¸ºå‡½æ•°æ´¾å‘æ ¹æ®æ–¹æ³•å£°æ˜çš„ä½ç½®çš„ä¸åŒè€Œé‡‡ç”¨äº†ä¸åŒçš„ç­–ç•¥ï¼Œæ€»ç»“èµ·æ¥æœ‰è¿™ä¹ˆå‡ ç‚¹:</p>
<ul>
<li>å€¼ç±»å‹ï¼ˆstruct, enumï¼‰æ€»æ˜¯ä¼šä½¿ç”¨ç›´æ¥æ´¾å‘</li>
<li>è€Œåè®®å’Œç±»çš„ <code>extension</code> éƒ½ä¼šä½¿ç”¨ç›´æ¥æ´¾å‘</li>
<li>åè®®å’Œæ™®é€š Swift ç±»å£°æ˜ä½œç”¨åŸŸé‡Œçš„æ–¹æ³•éƒ½ä¼šä½¿ç”¨å‡½æ•°è¡¨è¿›è¡Œæ´¾å‘</li>
<li>ç»§æ‰¿ <code>NSObject</code> çš„ç±»å£°æ˜ä½œç”¨åŸŸé‡Œçš„æ–¹æ³•éƒ½ä¼šä½¿ç”¨å‡½æ•°è¡¨æ´¾å‘</li>
<li>ç»§æ‰¿ <code>NSObject</code> çš„ç±»çš„ <code>extension</code> ã€ä½¿ç”¨ <code>dynamic</code> æ ‡è®°çš„æ–¹æ³•ä¼šä½¿ç”¨æ¶ˆæ¯æ´¾å‘</li>
</ul>
<p>ä¸‹é¢è¿™å¼ å›¾å¾ˆæ¸…æ¥šåœ°æ€»ç»“äº† Swift ä¸­å‡½æ•°æ´¾å‘æ–¹å¼ï¼Œä¸è¿‡å°‘äº† <code>dynamic</code> çš„æ–¹å¼ã€‚</p>
<p><img src="https://www.raizlabs.com/dev/wp-content/uploads/sites/10/2016/12/Defaults-1-768x503.png" alt=""></p>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè™½ç„¶ <code>Eagle</code> å’Œ <code>Plane</code> éƒ½å®ç°äº† <code>fly()</code> æ–¹æ³•ï¼Œä½†åœ¨å¤šæ€æ—¶ï¼Œä»ç„¶ä¼šè°ƒç”¨åè®®æ‹“å±•é‡Œçš„é»˜è®¤å®ç°ã€‚å› ä¸ºï¼Œåœ¨åè®®æ‹“å±•å£°æ˜çš„æ–¹æ³•ï¼Œåœ¨è°ƒç”¨æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ç›´æ¥æ´¾å‘ï¼Œç›´æ¥æ´¾å‘æ€»æ˜¯è¦ä¼˜äºå…¶ä»–çš„æ´¾å‘æ–¹å¼çš„ã€‚</p>
<p>æ‰€ä»¥ç†è§£ Swift ä¸­çš„å‡½æ•°æ´¾å‘ï¼Œå¯¹äºæˆ‘ä»¬å†™å‡ºç»“æ„æ¸…æ™°ã€æ²¡æœ‰ bug çš„ä»£ç æ˜¯éå¸¸é‡è¦çš„ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æ²¡æœ‰ä½¿ç”¨åˆ°å¤šæ€ï¼Œç›´æ¥ä½¿ç”¨å…·ä½“çš„ç±»å‹ï¼Œæ˜¯ä¸ä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜çš„ã€‚æ—¢ç„¶ä½ éƒ½å¼€å§‹ â€œé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å®ç°ç¼–ç¨‹â€ï¼Œæ€ä¹ˆä¼šç”¨ä¸åˆ°å¤šæ€å‘¢ï¼Œæ˜¯å§ã€‚</p>
<h2 id="ä½¿ç”¨åè®®æ”¹å–„æ—¢æœ‰çš„ä»£ç è®¾è®¡"><a href="#ä½¿ç”¨åè®®æ”¹å–„æ—¢æœ‰çš„ä»£ç è®¾è®¡" class="headerlink" title="ä½¿ç”¨åè®®æ”¹å–„æ—¢æœ‰çš„ä»£ç è®¾è®¡"></a>ä½¿ç”¨åè®®æ”¹å–„æ—¢æœ‰çš„ä»£ç è®¾è®¡</h2><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡åè®®è¿›è¡Œä»£ç å…±äº«ç›¸æ¯”ä¸é€šè¿‡ç»§æ‰¿çš„å…±äº«ï¼Œæœ‰è¿™å‡ ä¸ªä¼˜åŠ¿ï¼š</p>
<ul>
<li>æˆ‘ä»¬ä¸éœ€è¦è¢«å¼ºåˆ¶ä½¿ç”¨æŸä¸ªçˆ¶ç±»ã€‚</li>
<li>æˆ‘ä»¬å¯ä»¥è®©å·²ç»å­˜åœ¨çš„ç±»å‹æ»¡è¶³åè®® (æ¯”å¦‚æˆ‘ä»¬è®© CGContext æ»¡è¶³äº† Renderer)ã€‚å­ç±»å°±æ²¡é‚£ä¹ˆçµæ´»äº†ï¼Œå¦‚æœ CGContext æ˜¯ä¸€ä¸ªç±»çš„è¯ï¼Œæˆ‘ä»¬æ— æ³•ä»¥è¿½æº¯çš„æ–¹å¼å»å˜æ›´å®ƒçš„çˆ¶ç±»ã€‚</li>
<li>åè®®æ—¢å¯ä»¥ç”¨äºç±»ï¼Œä¹Ÿå¯ä»¥ç”¨äºç»“æ„ä½“ã€æšä¸¾ï¼Œè€Œç»§æ‰¿å°±æ— æ³•å’Œç»“æ„ä½“ã€æšä¸¾ä¸€èµ·ä½¿ç”¨äº†ã€‚</li>
<li>åè®®å¯ä»¥æ¨¡æ‹Ÿå¤šç»§æ‰¿ã€‚</li>
<li>æœ€åï¼Œå½“å¤„ç†åè®®æ—¶ï¼Œæˆ‘ä»¬æ— éœ€æ‹…å¿ƒæ–¹æ³•é‡å†™æˆ–è€…åœ¨æ­£ç¡®çš„æ—¶é—´è°ƒç”¨ super è¿™æ ·çš„é—®é¢˜ã€‚</li>
</ul>
<p>é€šè¿‡é¢å‘åè®®çš„ç¼–ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¼ ç»Ÿçš„ç»§æ‰¿ä¸Šè§£æ”¾å‡ºæ¥ï¼Œç”¨ä¸€ç§æ›´çµæ´»çš„æ–¹å¼ï¼Œåƒæ­ç§¯æœ¨ä¸€æ ·å¯¹ç¨‹åºè¿›è¡Œç»„è£…ã€‚åè®®å’Œç±»ä¸€æ ·ï¼Œåœ¨è®¾è®¡æ—¶è¦éµå®ˆ â€œå•ä¸€èŒè´£â€ åŸåˆ™ï¼Œè®©æ¯ä¸ªåè®®ä¸“æ³¨äºè‡ªå·±çš„åŠŸèƒ½ã€‚å¾—ç›Šäºåè®®æ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥å‡å°‘ç»§æ‰¿å¸¦æ¥çš„å…±äº«çŠ¶æ€çš„é£é™©ï¼Œè®©ä»£ç æ›´åŠ æ¸…æ™°ã€‚</p>
<p>ä½¿ç”¨é¢å‘åè®®ç¼–ç¨‹æœ‰åŠ©äºæˆ‘ä»¬å†™å‡ºä½è€¦åˆã€æ˜“äºæ‰©å±•ä»¥åŠå¯æµ‹è¯•çš„ä»£ç ï¼Œè€Œç»“åˆæ³›å‹æ¥ä½¿ç”¨åè®®ï¼Œæ›´å¯ä»¥è®©æˆ‘ä»¬å…äºåŠ¨æ€è°ƒç”¨å’Œç±»å‹è½¬æ¢çš„è‹¦æ¼ï¼Œä¿è¯äº†ä»£ç çš„å®‰å…¨æ€§ã€‚</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Swift/" rel="tag"># Swift</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/ck9grdnzn0006eyye9yombb7y/" rel="prev" title="ä» Swift ä¸­çš„åºåˆ—åˆ°ç±»å‹æ“¦é™¤">
      <i class="fa fa-chevron-left"></i> ä» Swift ä¸­çš„åºåˆ—åˆ°ç±»å‹æ“¦é™¤
    </a></div>
      <div class="post-nav-item">
    <a href="/ck9grdnzg0002eyyefbpa6ftj/" rel="next" title="Swiftä¸å‡½æ•°å¼ç¼–ç¨‹çš„é‚£äº›äº‹">
      Swiftä¸å‡½æ•°å¼ç¼–ç¨‹çš„é‚£äº›äº‹ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E7%BC%96%E7%A8%8B%E4%B8%8D%E6%98%AF%E4%B8%AA%E6%96%B0%E6%A6%82%E5%BF%B5"><span class="nav-number">1.</span> <span class="nav-text">é¢å‘åè®®ç¼–ç¨‹ä¸æ˜¯ä¸ªæ–°æ¦‚å¿µ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-%E4%B8%AD%E7%9A%84%E5%8D%8F%E8%AE%AE"><span class="nav-number">2.</span> <span class="nav-text">Swift ä¸­çš„åè®®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8E%E4%B8%80%E4%B8%AA%E7%BB%98%E5%9B%BE%E5%BA%94%E7%94%A8%E5%BC%80%E5%A7%8B"><span class="nav-number">2.1.</span> <span class="nav-text">ä»ä¸€ä¸ªç»˜å›¾åº”ç”¨å¼€å§‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6%E6%9C%89-Self-%E5%92%8C%E5%85%B3%E8%81%94%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8D%8F%E8%AE%AE"><span class="nav-number">2.2.</span> <span class="nav-text">å¸¦æœ‰ Self å’Œå…³è”ç±»å‹çš„åè®®</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%A6%E6%9C%89-Self-%E7%9A%84%E5%8D%8F%E8%AE%AE"><span class="nav-number">2.2.1.</span> <span class="nav-text">å¸¦æœ‰ Self çš„åè®®</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%A6%E6%9C%89%E5%85%B3%E8%81%94%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8D%8F%E8%AE%AE"><span class="nav-number">2.2.2.</span> <span class="nav-text">å¸¦æœ‰å…³è”ç±»å‹çš„åè®®</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%8F%E8%AE%AE%E4%B8%8E%E5%87%BD%E6%95%B0%E6%B4%BE%E5%8F%91"><span class="nav-number">2.3.</span> <span class="nav-text">åè®®ä¸å‡½æ•°æ´¾å‘</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8D%8F%E8%AE%AE%E6%94%B9%E5%96%84%E6%97%A2%E6%9C%89%E7%9A%84%E4%BB%A3%E7%A0%81%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.</span> <span class="nav-text">ä½¿ç”¨åè®®æ”¹å–„æ—¢æœ‰çš„ä»£ç è®¾è®¡</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jewelz Hu"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Jewelz Hu</p>
  <div class="site-description" itemprop="description">Stay hungry, Stay foolish.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">32</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hujewelz" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;hujewelz" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hujewelz@gmail.com" title="E-Mail â†’ mailto:hujewelz@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/huluoboboo" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;huluoboboo" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jewelz Hu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
